<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <title>Blog</title>
        <link rel="stylesheet" href="/CSS/blog.css">
</head>

<body class="bg-dark">
    <%- include('./partials/nav') %>

        <div class="container">
            <h1 class="center-title">
                <%= blog.title %>
            </h1>
            <img class="image_top" src="<%= blog.coverImageURL %>" width="500px" alt="">
            <p class="m-3" style="white-space: pre-line;"><%= blog.body %></p>
        </div>
        <div class="container">
            <div class="created-by">
                <img src="<%= blog.createdBy.profileImageURL %>" width="50px">
                <span>
                    <%= blog.createdBy.fullName %>
                </span>
            </div>
        </div>



        <div class="container mt-3">
            <h1>Comments (<%= comments.length %>)</h1>
            <% if (locals.user) { %>
                <form action="/blog/comment/<%= blog._id %>" method="post" class="comment-form">
                    <div class="comment-input">
                        <input type="text" name="content" class="form-control" id="content">
                        <button class="btn btn-primary btn-circle" type="submit">Comment</button>
                    </div>
                </form>
                <% } %>
        </div>

        <div class=" container mt-3">
            <% comments.forEach(comment => { %>
                <div class="comment" style="border: 1px solid white; border-radius: 5px; padding: 10px; margin-bottom: 10px;">
                    <div class="user-info d-flex align-items-center ">
                        <img class="rounded-circle" src="<%= comment.createdBy.profileImageURL %>" width="50px" style="margin-right: 10px;">
                        <span class="font-monospace fw-semibold"><%= comment.createdBy.fullName %></span>
                    </div>
                    <p class="comment_1 text-start fst-italic" >
                        <%= comment.content %>
                    </p>
                </div>
            <% }) %>
        </div>
        
        


        <%- include('./partials/scripts') %>
</body>

</html>